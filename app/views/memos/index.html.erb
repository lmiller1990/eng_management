<% content_for :title, "Memos" %>

<div class="w-full">
  <% if notice.present? %>
    <p
      class="
        py-2 px-3 bg-green-50 mb-5 text-green-500 font-medium rounded-md inline-block
      "
      id="notice"
    ><%= notice %></p>
  <% end %>

  <div class="flex justify-between items-center">
    <h1 class="font-bold text-4xl">Memos</h1>
    <%= link_to "New memo",
    new_memo_path,
    class:
      "rounded-md px-3.5 py-2.5 bg-blue-600 hover:bg-blue-500 text-white block font-medium" %>
  </div>

  <div id="memos" class="overflow-x-auto">
    <% if @memos.any? %>
      <table class="table">
        <thead>
          <tr>
            <th></th>
            <th>Title</th>
            <th>Content</th>
            <th>Owner</th>
            <th>Invitees</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% @memos.each_with_index do |memo, index| %>
            <tr>
              <th><%= index + 1 %></th>
              <td><%= memo.title %></td>
              <td><%= memo.content %></td>
              <td><%= memo.owner.email %></td>
              <td>
                <% if memo.memo_invitations.any? %>
                  <%= memo.memo_invitations.map(&:email).join(", ") %>
                <% else %>
                  <span class="text-gray-400">None</span>
                <% end %>
              </td>
              <td>
                <div class="flex space-x-2">
                  <%= link_to "Show",
                  memo,
                  class:
                    "rounded-md px-3.5 py-2.5 bg-gray-100 hover:bg-gray-50 inline-block font-medium" %>
                  <%= link_to "Edit",
                  edit_memo_path(memo),
                  class:
                    "rounded-md px-3.5 py-2.5 bg-gray-100 hover:bg-gray-50 inline-block font-medium" %>
                  <%= button_to "Destroy",
                  memo,
                  method: :delete,
                  class:
                    "rounded-md px-3.5 py-2.5 text-white bg-red-600 hover:bg-red-500 font-medium cursor-pointer",
                  data: {
                    turbo_confirm: "Are you sure?",
                  } %>
                </div>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% else %>
      <p class="text-center my-10">No memos found.</p>
    <% end %>
  </div>
</div>
