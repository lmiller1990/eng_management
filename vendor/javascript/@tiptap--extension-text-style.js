// @tiptap/extension-text-style@3.13.0 downloaded from https://ga.jspm.io/npm:@tiptap/extension-text-style@3.13.0/dist/index.js

import{Mark as t,mergeAttributes as e,Extension as r}from"@tiptap/core";var n=20;var o=(t,e=0)=>{const r=[];if(!t.children.length||e>n)return r;Array.from(t.children).forEach((t=>{t.tagName==="SPAN"?r.push(t):t.children.length&&r.push(...o(t,e+1))}));return r};var s=t=>{if(!t.children.length)return;const e=o(t);e&&e.forEach((t=>{var e,r;const n=t.getAttribute("style");const o=(r=(e=t.parentElement)==null?void 0:e.closest("span"))==null?void 0:r.getAttribute("style");t.setAttribute("style",`${o};${n}`)}))};var l=t.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:true}},parseHTML(){return[{tag:"span",consuming:false,getAttrs:t=>{const e=t.hasAttribute("style");if(!e)return false;this.options.mergeNestedSpanStyles&&s(t);return{}}}]},renderHTML({HTMLAttributes:t}){return["span",e(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleTextStyle:t=>({commands:e})=>e.toggleMark(this.name,t),removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;t.doc.nodesBetween(e.from,e.to,((e,r)=>{if(e.isTextblock)return true;e.marks.filter((t=>t.type===this.type)).some((t=>Object.values(t.attrs).some((t=>!!t))))||t.removeMark(r,r+e.nodeSize,this.type)}));return true}}}});var i=r.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:t=>{var e;const r=t.getAttribute("style");if(r){const t=r.split(";").map((t=>t.trim())).filter(Boolean);for(let e=t.length-1;e>=0;e-=1){const r=t[e].split(":");if(r.length>=2){const t=r[0].trim().toLowerCase();const e=r.slice(1).join(":").trim();if(t==="background-color")return e.replace(/['"]+/g,"")}}}return(e=t.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.backgroundColor?{style:`background-color: ${t.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:t=>({chain:e})=>e().setMark("textStyle",{backgroundColor:t}).run(),unsetBackgroundColor:()=>({chain:t})=>t().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}});var a=r.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;const r=t.getAttribute("style");if(r){const t=r.split(";").map((t=>t.trim())).filter(Boolean);for(let e=t.length-1;e>=0;e-=1){const r=t[e].split(":");if(r.length>=2){const t=r[0].trim().toLowerCase();const e=r.slice(1).join(":").trim();if(t==="color")return e.replace(/['"]+/g,"")}}}return(e=t.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}});var u=r.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}});var c=r.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>e().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}});var p=r.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:t=>t.style.lineHeight,renderHTML:t=>t.lineHeight?{style:`line-height: ${t.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:t=>({chain:e})=>e().setMark("textStyle",{lineHeight:t}).run(),unsetLineHeight:()=>({chain:t})=>t().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});var y=r.create({name:"textStyleKit",addExtensions(){const t=[];this.options.backgroundColor!==false&&t.push(i.configure(this.options.backgroundColor));this.options.color!==false&&t.push(a.configure(this.options.color));this.options.fontFamily!==false&&t.push(u.configure(this.options.fontFamily));this.options.fontSize!==false&&t.push(c.configure(this.options.fontSize));this.options.lineHeight!==false&&t.push(p.configure(this.options.lineHeight));this.options.textStyle!==false&&t.push(l.configure(this.options.textStyle));return t}});export{i as BackgroundColor,a as Color,u as FontFamily,c as FontSize,p as LineHeight,l as TextStyle,y as TextStyleKit};

